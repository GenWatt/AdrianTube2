@using AdrianTube2.Models.Movie

<Menu @ref="menu" CssClass="position-relative" IsButton="false" ListStyle="width: 40rem">
    @foreach (var movie in Movies)
    {
        <SearchMovieItem Movie="@movie" OnSelected="@HandleSelect" />
    }
</Menu>

@code {
    [Parameter] public List<Movie> Movies { get; set; } = new List<Movie>();
    private Menu menu;

    // on paramter set
    protected override void OnParametersSet()
    {
        if (menu == null) return;
        if (Movies.Count > 0)
        {
            menu.Open();
            return;
        }

        menu.Close();
    }
    
    void HandleSelect(Movie movie)
    {
        Movies.Clear();
        menu.Close();
    }
}